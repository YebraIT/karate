{% extends "base.html" %}
{% block content %}
<div class="container">
    <form method="POST" action="{% url 'participantes:generar_arreglo' %}" enctype="multipart/form-data">{% csrf_token %}
        <div class="row">
            <div class="col-md-6">
                <select class="form-control" name="torneo" required>
                    <option value="">Seleccionar torneo</option>
                    {% for dat in torneos_list %}
                        <option value="{{ dat.id }}">{{ dat.nombre }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-md-6">
                <button class="btn btn-primary" type="submit">Generar</button>
            </div>
        </div>
    </form>
    <br>
    {% if error %}
        <div class="alert alert-danger">
            <p>{{ error }}</p>
        </div>
    {% else %}
        {% for resultado in resultados_por_categoria %}
            <h3>Categoría: {{ resultado.categoria }} - Sexo: {{ resultado.sexo }}</h3>
            <p><strong>Total de Participantes:</strong> {{ resultado.numero_total_participantes }}</p>
            <p><strong>Número de Grupos:</strong> {{ resultado.numero_grupos }}</p>

            <table class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>Grupo</th>
                        <th>Participantes</th>
                    </tr>
                </thead>
                <tbody>
                    {% for grupo in resultado.grupos %}
                        <tr>
                            <td>Grupo {{ forloop.counter }}</td>
                            <td>
                                {% for participante in grupo %}
                                    {% if participante == 0 %}
                                        <span class="text-muted">Fantasma</span>
                                    {% else %}
                                        {{ participante }}
                                    {% endif %}
                                    <br>
                                {% endfor %}
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
            <hr>
        {% endfor %}
    {% endif %}
</div>
{% endblock %}
